<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="author" content="">
<meta name="keyword" content="">

    <link rel="shortcut icon" href="/mongo-csharp-driver/2.11/img/favicon.png">

    <title>Authentication</title>

    <link rel="stylesheet" href="/mongo-csharp-driver/2.11/lib/bootstrap.css" type="text/css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/lib/font-awesome/css/font-awesome.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/css/mongodb-docs.css" type="text/css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/css/overrides.css" type="text/css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/lib/highlight/styles/idea.css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/lib/bootstrap-toggle/bootstrap-toggle.min.css" type="text/css" />
<link rel="stylesheet" href="/mongo-csharp-driver/2.11/css/dn.css" type="text/css" />


  </head>

  <body>
  
  <section id="container" class="">
      
      <header id="header-db" class="row" role="navigation">
  <div class="header-content">
    <div class="toggle-nav pull-left">
        <i class="fa fa-bars"></i>
        <div class="icon-reorder tooltips" data-original-title="Toggle Navigation" data-placement="bottom"></div>
    </div>
    
    <div class="logo pull-left">
      <a href="/mongo-csharp-driver/2.11/../">
        <img src="/mongo-csharp-driver/2.11/img/logo-mongodb-header.png", alt="MongoDB.org" />
      </a>
    </div>
    
    <div>
<div class="nav-items pull-right">
  <a href="http://try.mongodb.org/" data-toggle="tooltip" data-placement="bottom" title="Try MongoDB in the browser">Try it Out</a>
  <a href="http://www.mongodb.org/downloads" data-toggle="tooltip" data-placement="bottom" title="Download MongoDB">Downloads</a>
  <a href="http://www.mongodb.org/get-involved" data-toggle="tooltip" data-placement="bottom" title="Get involved with MongoDB">Community</a>
  <a href="http://docs.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Documentation">Docs</a>
  <a href="http://blog.mongodb.org" data-toggle="tooltip" data-placement="bottom" title="The MongoDB Blog">Blog</a>
  <div id="search">
<form method="get" action="//www.google.com/search" target="_blank">
    <input type="text" name="searchQuery" size="20" value="" autocomplete="off" placeholder="Search docs">
    <input type="hidden" name="site" value="/mongo-csharp-driver/2.11">
    <input type="hidden" name="q" value="">
    <label for="searchQuery"><i class="fa fa-search fa-1"></i></label>
</form>
</div>

</div>
</div>

  </div>
</header>

      

      
<aside id="sidebar" class="sidebar">
    <div class="ssidebar nav-collapse">
      <div class="ssidebarwrapper">
        <h3>
          <a class="index-link" href="/mongo-csharp-driver/2.11/../">MongoDB .NET Driver</a>
          <a class="version pull-right" href="/mongo-csharp-driver/2.11">2.11</a>
        </h3>

        
        <ul class="sidebar-menu">
          
          
          
          
          
          
          
          
          
          
          
          

          
          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


          
            
            









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
    
      
    
  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  
    
    
      
      
        
        
        
        
        
        
        
        









  


        
          
        
      
    
      
      
        
        
        
        
        
        
        
        









  
  
  
  
  
  
  
  

  
    
    
    
      
      
      
        
        
        
          
        
      
      
    
    
  
  


        
      
    
    
  


        
      
    
      
      
        
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


        
      
    
      
      
    
      
      
    
    
  


          
            
            









  
    
    
      
      
    
      
      
    
      
      
    
      
      
    
      
      
    
    
  


          
            
            









  


          
            
            









  


          
            
            









  


          

          

          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-csharp-driver/2.11/getting_started/" class="">
      <i class='fa fa-road'></i>
      <span>Getting Started</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/getting_started/installation/">
        <i class='fa'></i>
        Installation
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/getting_started/quick_tour/">
        <i class='fa'></i>
        Quick Tour
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/getting_started/admin_quick_tour/">
        <i class='fa'></i>
        Admin Quick Tour
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-csharp-driver/2.11/what_is_new/" class="">
      <i class='fa fa-star'></i>
      <span>What&#39;s New</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/upgrading/">
        <i class='fa'></i>
        Upgrading
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            













  




<li class="toctree-l1  current">
  <a href="/mongo-csharp-driver/2.11/reference/" class="">
      <i class='fa fa-book'></i>
      <span>Reference</span>
      <span class="menu-arrow fa fa-angle-down"></span>
  </a>
    <ul  class="current">
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-csharp-driver/2.11/reference/bson/" class="">
      <i class='fa'></i>
      <span>BSON</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/bson/bson/">
        <i class='fa'></i>
        BSON/JSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/bson/bson_document/">
        <i class='fa'></i>
        BsonDocument
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/bson/serialization/">
        <i class='fa'></i>
        Serialization
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-csharp-driver/2.11/reference/bson/mapping/" class="">
      <i class='fa'></i>
      <span>Mapping Classes</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/bson/mapping/polymorphism/">
        <i class='fa'></i>
        Polymorphism
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/bson/mapping/conventions/">
        <i class='fa'></i>
        Conventions
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/bson/mapping/schema_changes/">
        <i class='fa'></i>
        Handling Schema Changes
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        













  




<li class="toctree-l2  current">
  <a href="/mongo-csharp-driver/2.11/reference/driver/" class="">
      <i class='fa'></i>
      <span>Driver</span>
      
  </a>
    <ul  class="current">
        
        
        
        













  




<li class="toctree-l3  current">
  <a href="/mongo-csharp-driver/2.11/reference/driver/connecting/" class="">
      <i class='fa'></i>
      <span>Connecting</span>
      
  </a>
    <ul  class="current">
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/ssl/">
        <i class='fa'></i>
        SSL
    </a>
  </li>


        
        
        
        
        













  




    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/authentication/">
        <i class='fa'></i>
        Authentication
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-csharp-driver/2.11/reference/driver/definitions/" class="">
      <i class='fa'></i>
      <span>Definitions and Builders</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/expressions/">
        <i class='fa'></i>
        Expressions
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/driver/admin/">
        <i class='fa'></i>
        Administration
    </a>
  </li>


        
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-csharp-driver/2.11/reference/driver/crud/" class="">
      <i class='fa'></i>
      <span>Reading and Writing</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/reading/">
        <i class='fa'></i>
        Reading
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/linq/">
        <i class='fa'></i>
        LINQ
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/writing/">
        <i class='fa'></i>
        Writing
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/compression/">
        <i class='fa'></i>
        Compression
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/sessions_and_transactions/">
        <i class='fa'></i>
        Sessions and Transactions
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver/crud/client_side_encryption/">
        <i class='fa fa-lock'></i>
        Client-Side Encryption
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/driver/change_streams/">
        <i class='fa'></i>
        Change Streams
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/driver/error_handling/">
        <i class='fa'></i>
        Error Handling
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-csharp-driver/2.11/reference/driver_core/" class="">
      <i class='fa'></i>
      <span>Driver Core</span>
      
  </a>
    <ul >
        
        
        
        
















<li class="toctree-l3 ">
  <a href="/mongo-csharp-driver/2.11/reference/driver_core/events/" class="">
      <i class='fa'></i>
      <span>Eventing</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l4">
    <a href="/mongo-csharp-driver/2.11/reference/driver_core/sdamevents/">
        <i class='fa'></i>
        SDAM Events
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


        
        
        
        
        
















<li class="toctree-l2 ">
  <a href="/mongo-csharp-driver/2.11/reference/gridfs/" class="">
      <i class='fa'></i>
      <span>GridFS</span>
      
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/gridfs/gettingstarted/">
        <i class='fa'></i>
        Getting Started
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/gridfs/uploadingfiles/">
        <i class='fa'></i>
        Uploading Files
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/gridfs/downloadingfiles/">
        <i class='fa'></i>
        Downloading Files
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/gridfs/findingfiles/">
        <i class='fa'></i>
        Finding Files
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l3">
    <a href="/mongo-csharp-driver/2.11/reference/gridfs/deletingandrenamingfiles/">
        <i class='fa'></i>
        Deleting and Renaming Files
    </a>
  </li>


        
        
    </ul>
  </li>


        
        
    </ul>
  </li>


          
            
            
















<li class="toctree-l1 ">
  <a href="/mongo-csharp-driver/2.11/examples/" class="">
      <i class='fa fa-code'></i>
      <span>Examples</span>
      <span class="menu-arrow fa fa-angle-right"></span>
  </a>
    <ul >
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/examples/exporting_json/">
        <i class='fa'></i>
        Exporting JSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/examples/importing_json/">
        <i class='fa'></i>
        Importing JSON
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/examples/mixing_static_and_dynamic/">
        <i class='fa'></i>
        Mixing Static and Dynamic Data
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/examples/tailable_cursor/">
        <i class='fa'></i>
        Using a Tailable Cursor
    </a>
  </li>


        
        
        
        
        
















    <li class="toctree-l2">
    <a href="/mongo-csharp-driver/2.11/examples/user_management/">
        <i class='fa'></i>
        Managing Users
    </a>
  </li>


        
        
    </ul>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-csharp-driver/2.11/apidocs/">
        <i class='fa fa-file-text-o'></i>
        API Documentation
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="https://github.com/mongodb/mongo-csharp-driver/tree/master">
        <i class='fa fa-github'></i>
        Source Code
    </a>
  </li>


          
            
            
















    <li class="toctree-l1">
    <a href="/mongo-csharp-driver/2.11/issues_help/">
        <i class='fa fa-life-ring'></i>
        Issues &amp; Help
    </a>
  </li>


          
        </ul>
        
    </div>
  </div>
  
</aside>

<div class="option-popup closed hidden" id="optionsVersionsPopup">
<div class="option-header">
  <i class="fa fa-gear"></i>
  <span>OPTIONS</span>
  <i class="fa fa-angle-up pull-right"></i>
</div>
<div class="option-body">
  <ul>
      
      <li>
        <label>Version</label>
        <div class="btn-group btn-group-xs pull-right">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
            Select Version <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" role="menu" id="optionsVersionsMenu">
          </ul>
        </div>
      </li>

   


    

  </ul>
</div>
</div>



      
      <section id="main-content" class="content">
          <section class="main-column pull-left">
            <div class="document">
              <div class="documentwrapper">
                <div class="bodywrapper">
                  <div class="body">


   
<a class="edit-link" href="https://github.com/mongodb/mongo-csharp-driver/blob/master/docs/reference/content/reference%5cdriver%5cauthentication.md" target="_blank" title="Edit reference\driver\authentication.md on GitHub"><i class="fa fa-pencil-square-o"></i></a>










<div class="bc">
<ul>
  
  
  
  <li><a href="/mongo-csharp-driver/2.11/reference/">Reference</a> <i class="fa fa-angle-right"></i></li>
  <li><a href="/mongo-csharp-driver/2.11/reference/driver/">Driver</a> <i class="fa fa-angle-right"></i></li>
  <li><a href="/mongo-csharp-driver/2.11/reference/driver/connecting/">Connecting</a> <i class="fa fa-angle-right"></i></li>
  <li>Authentication</li>
</ul>
</div>




<h2 id="authentication">Authentication</h2>

<p>The .NET driver supports all <a href="http://docs.mongodb.org/manual/core/authentication/
">MongoDB authentication mechanisms</a> including those in the <a href="http://docs.mongodb.org/manual/administration/install-enterprise/
">Enterprise Edition</a>.</p>

<p>Authentication credentials are created by the application as instances of <a href="/mongo-csharp-driver/2.11/apidocs/html/T_MongoDB_Driver_MongoCredential.htm
"><code>MongoCredential</code></a> which includes static factory methods for each of the supported authentication mechanisms. A list of these instances must be passed to the driver using the <a href="/mongo-csharp-driver/2.11/apidocs/html/M_MongoDB_Driver_MongoClient__ctor_1.htm
"><code>MongoClient constructor</code></a> that takes a <a href="/mongo-csharp-driver/2.11/apidocs/html/T_MongoDB_Driver_MongoClientSettings.htm
"><code>MongoClientSettings</code></a>. When only one credential is necessary, it is possible to specify via the <a href="/mongo-csharp-driver/2.11/reference/driver/connecting/#connection-string">connection string</a>.</p>

<h3 id="default">Default</h3>

<p>MongoDB 4.0 now uses <a href="https://docs.mongodb.com/manual/core/security-scram/#authentication-scram">SCRAM</a> (Salted Challenge Response Authentication Mechanism) as the default mechanism and no longer supports <a href="http://docs.mongodb.org/manual/core/authentication/#mongodb-cr-authentication">MONGODB-CR</a>. To create a credential that will authenticate properly regardless of server version, create a credential using the following static factory method.</p>

<pre><code class="language-csharp">var credential = MongoCredential.CreateCredential(databaseName, username, password);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username:password@myserver/databaseName
</code></pre>

<p>These are the recommended approaches as it will make upgrading from MongoDB 2.6 to MongoDB 3.0 seamless, before and after <a href="http://docs.mongodb.org/manual/release-notes/3.0-scram/#upgrade-mongodb-cr-to-scram">upgrading the authentication schema</a>. For MongoDB 4.0, the above approaches will automatically determine which version of SCRAM should be used (SCRAM-SHA-1 or SCRAM-SHA-256).</p>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
The databaseName part of the connection string indicates which database the credentials are located in. See the <a href="/mongo-csharp-driver/2.11/reference/driver/connecting/#connection-string">connection string section</a> for more information on connection strings.
</div>
</p>

<h3 id="scram">SCRAM</h3>

<p>When connecting to a MongoDB 4.0 server without specifying an authentication mechanism, the driver will negotiate with the server to determine whether SCRAM-SHA-1 or SCRAM-SHA-256 is the appropriate mechanism.</p>

<h4 id="scram-sha-256">SCRAM-SHA-256</h4>

<p>SCRAM-SHA-256 is the default authentication mechanism chosen as long as the user&rsquo;s authentication mechanism supports it. (See the <a href="https://docs.mongodb.com/manual/reference/method/db.createUser/#db.createUser">mechanism parameter of createUser()</a> and the <a href="https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst#defaults">&ldquo;Supported Authentication Methods: Defaults&rdquo; section of the Driver Authentication Specification</a> for additional information.</p>

<h5 id="securestrings">SecureStrings</h5>

<p>SecureStrings are slightly less secure when used in conjunction with SCRAM-SHA-256, due to the need to temporarily store the cleartext password in a managed memory string in order to SASLPrep it. This behavior is no different from other drivers in languages with managed memory. (SCRAM-SHA-1 is <em>not</em> affected.)</p>

<h5 id="net-standard-support">.NET Standard support</h5>

<p>In .NET Standard, authenticating via SCRAM-SHA-256 may not work with non-ASCII passwords because SASLPrep is not fully implemented due to the lack of a string normalization function in .NET Standard 1.5. Normalizing the password into Unicode Normalization Form KC beforehand MAY help. SCRAM-SHA-1 is the recommended alternative for now. See <a href="https://tools.ietf.org/html/rfc5802">RFC5802</a> and the <a href="https://github.com/mongodb/specifications/blob/master/source/auth/auth.rst#scram-sha-256">SCRAM-SHA-256 section of the Driver Authentication specification</a> for additional information.</p>

<h3 id="x-509-authentication">x.509 Authentication</h3>

<p>The <a href="http://docs.mongodb.org/manual/core/authentication/#x-509-certificate-authentication">x.509</a> mechanism authenticates a user whose name is derived from the distinguished subject name of the x.509 certificate presented by the driver during SSL negotiation. This authentication method requires the use of <a href="/mongo-csharp-driver/2.11/reference/driver/ssl/">SSL connections</a> with certificate validation and is available in MongoDB 2.6 and newer.</p>

<p>There are two ways to create a credential of this type:</p>

<ol>
<li><p>Programmatically, using the following static factory method:</p>

<pre><code class="language-csharp">var credential = MongoCredential.CreateX509Credential(username);
</code></pre>

<p>When configuring x.509 authentication programmatically, the <code>username</code> parameter provided to <code>CreateX509Credential</code> must match the distinguished subject name of your x.509 certificate <em>exactly</em>. To determine the exact <code>username</code> required for your x.509 connection, consult <a href="http://docs.mongodb.org/manual/tutorial/configure-x509-client-authentication/#add-x-509-certificate-subject-as-a-user">the MongoDB server x.509 tutorial</a>. Alternatively, any <code>null</code> <code>username</code> parameter provided to <code>CreateX509Credential</code> will cause the MongoDB server to infer a username based on the distinguished subject name of the x.509 certificate. Using a <code>null</code> username value can help prevent issues when certificates are updated, since you can avoid managing a <code>username</code> value and a certificate as separate entities in your environment.</p></li>

<li><p>Manually, using <a href="https://docs.mongodb.com/manual/reference/connection-string/#connection-string-options">connection string options</a>:</p>

<pre><code>mongodb://myserver/?authMechanism=MONGODB-X509
</code></pre>

<p>When configuring x.509 authentication from a connection string, you must still provide the certificate programmatically via <code>MongoClientSettings</code>. Any connection string specifying x.509 authentication must be imported into a <code>MongoClientSettings</code> object using <code>MongoClientSettings.FromConnectionString</code> to add the certificate to the configuration.</p></li>
</ol>

<p>You can use certificates via the trust stores on your computer, or a PKCS #12 (<code>.pfx</code>) file. To be used with client authentication, the <a href="https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate.aspx"><code>X509Certificate</code></a> provided to the driver must contain the <a href="https://msdn.microsoft.com/en-us/library/system.security.cryptography.x509certificates.x509certificate2.privatekey.aspx"><code>PrivateKey</code></a>.</p>

<p>For testing purposes, the <code>AllowInsecureTls</code> field of your <code>MongoClientSettings</code> can be set to <code>true</code> to allow the use of self-signed certificates. Since this setting bypasses the validation of certificates entirely, it should never be used for production uses.</p>

<p>Connecting using a <code>MongoClientSettings</code> object built from a connection string:</p>

<pre><code class="language-csharp">var connectionString = &quot;mongodb://myserver/?authMechanism=MONGODB-X509&quot;;
var settings = MongoClientSettings.FromConnectionString(connectionString);

settings.useTls = true;
settings.SslSettings = new SslSettings
{
    ClientCertificates = new List&lt;X509Certificate&gt;()
    {
        new X509Certificate2(&quot;client-certificate.pfx&quot;, &quot;password&quot;)
    }
};

// For testing using self-signed certs, use this option to skip validation.
// DO NOT USE THIS OPTION FOR PRODUCTION USES
settings.AllowInsecureTls = true;
</code></pre>

<p>Connecting using a <code>MongoClientSettings</code> object built from scratch:</p>

<pre><code class="language-csharp">var settings = new MongoClientSettings 
{
    // if a username is null, the distinguished name from the certificate will be used
    Credential =  MongoCredential.CreateMongoX509Credential(null),
    SslSettings = new SslSettings
    {
        ClientCertificates = new List&lt;X509Certificate&gt;()
        {
            new X509Certificate2(&quot;client-certificate.pfx&quot;, &quot;password&quot;)
        },
    },
    UseTls = true,
    Server = new MongoServerAddress(&quot;myserver&quot;, 27017),

    // For testing using self-signed certs, use this option to skip validation.
    // DO NOT USE THIS OPTION FOR PRODUCTION USES
    AllowInsecureTls = true
};
</code></pre>

<h3 id="gssapi-kerberos">GSSAPI/Kerberos</h3>

<p><a href="http://www.mongodb.com/products/mongodb-enterprise">MongoDB Enterprise</a> supports authentication using <a href="http://docs.mongodb.org/manual/core/authentication/#kerberos-authentication">Kerberos/GSSAPI</a>. To create a Kerberos/GSSAPI credential, use the following method:</p>

<pre><code class="language-csharp">var credential = MongoCredential.CreateGssapiCredential(username, password);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username%40REALM.com:password@myserver/?authMechanism=GSSAPI
</code></pre>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
Note that the username will need to have a REALM associated with it. When used in a connection string, <code>%40</code> is the escape character for the <code>@</code> symbol.
</div>
</p>

<p>If the process owner running your application is the same as the user needing authentication, you can omit the password:</p>

<pre><code class="language-csharp">var credential = MongoCredential.CreateGssapiCredential(username);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username%40REALM.com@myserver/?authMechanism=GSSAPI
</code></pre>

<p>Depending on the kerberos setup, it may be required to specify some additional properties. These may be specified in the connection string or via code.</p>

<ul>
<li><p><strong>CANONICALIZE_HOST_NAME</strong></p>

<p>Uses the DNS server to retrieve the fully qualified domain name (FQDN) of the host.</p>

<pre><code class="language-csharp">credential = credential.WithMechanismProperty(&quot;CANONICALIZE_HOST_NAME&quot;, &quot;true&quot;);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username@myserver/?authMechanism=GSSAPI&amp;authMechanismProperties=CANONICALIZE_HOSTNAME:true
</code></pre></li>

<li><p><strong>REALM</strong></p>

<p>This is used when the user&rsquo;s realm is different from the service&rsquo;s realm.</p>

<pre><code class="language-csharp">credential = credential.WithMechanismProperty(&quot;REALM&quot;, &quot;otherrealm&quot;);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username%40REALM.com@myserver/?authMechanism=GSSAPI&amp;authMechanismProperties=REALM:otherrealm
</code></pre></li>

<li><p><strong>SERVICE_NAME</strong></p>

<p>This is used when the service&rsquo;s name is different that the default <code>mongodb</code>.</p>

<pre><code class="language-csharp">credential = credential.WithMechanismProperty(&quot;SERVICE_NAME&quot;, &quot;othername&quot;);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username%40REALM.com@myserver/?authMechanism=GSSAPI&amp;authMechanismProperties=SERVICE_NAME:othername
</code></pre></li>
</ul>

<p>In addition, it is possible to use multiple authentication mechanism properties either via code or in the connection string. In code, call <code>WithMechanismProperty</code> multiple times. In the connection string, separate the entries with a <code>,</code> (comma).</p>

<pre><code>mongodb://username%40REALM.com@myserver/?authMechanism=GSSAPI&amp;authMechanismProperties=SERVICE_NAME:othername,REALM:otherrealm
</code></pre>

<h3 id="ldap-plain">LDAP (PLAIN)</h3>

<p><a href="http://www.mongodb.com/products/mongodb-enterprise">MongoDB Enterprise</a> supports proxy authentication through a Lightweight Directory Access Protocol (LDAP) service. To create a credential of type LDAP use the following static factory method:</p>

<pre><code class="language-csharp">var credential = MongoCredential.CreatePlainCredential(&quot;$external&quot;, username, password);
</code></pre>

<p>Or via the connection string:</p>

<pre><code>mongodb://username:password@myserver/?authSource=$external&amp;authMechanism=PLAIN
</code></pre>

<p><div class="admonition note">
<h5 class="admonition-title">Note</h5>
Note that the method refers to the plain authentication mechanism instead of LDAP because technically the driver is authenticating via the PLAIN SASL mechanism. This means that your credentials are in plain text on the wire. Therefore, PLAIN should only be used in conjunction with SSL.
</div>
</p>






<div id="btnv">
  
  <div class="pull-left">
  <a class="navigation prev" href="/mongo-csharp-driver/2.11/reference/driver/ssl/">
      <i class="fa fa-long-arrow-left"> </i> SSL
  </a>
  </div>
  
  
  <div class="pull-right">
  <a class="navigation next" href="/mongo-csharp-driver/2.11/reference/driver/definitions/">
    Definitions and Builders <i class="fa fa-long-arrow-right"> </i>
  </a>
  
</div>
</div>


</div>
<div class="right-column">
<div class="wrapper">
  
  <div class="toc">
    <span class="toc-header">On this page</span>
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#authentication">Authentication</a>
<ul>
<li><a href="#default">Default</a></li>
<li><a href="#scram">SCRAM</a>
<ul>
<li><a href="#scram-sha-256">SCRAM-SHA-256</a>
<ul>
<li><a href="#securestrings">SecureStrings</a></li>
<li><a href="#net-standard-support">.NET Standard support</a></li>
</ul></li>
</ul></li>
<li><a href="#x-509-authentication">x.509 Authentication</a></li>
<li><a href="#gssapi-kerberos">GSSAPI/Kerberos</a></li>
<li><a href="#ldap-plain">LDAP (PLAIN)</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
  </div>
  
</div>
</div>

</div>
</div>
</div>
</section>
</section>

</section>


<script type="text/javascript">
  var DOCUMENTATION_OPTIONS = {
   URL_ROOT:    "/mongo-csharp-driver/2.11",
   VERSION:     "2.11",
   COLLAPSE_INDEX: false,
   FILE_SUFFIX: '.html',
   HAS_SOURCE:  true
  };
</script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/js/jquery.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/lib/bootstrap.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/js/navbar.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/lib/highlight/highlight.pack.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/js/scripts.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/lib/bootstrap-toggle/bootstrap-toggle.min.js"></script>
<script type="text/javascript" src="/mongo-csharp-driver/2.11/js/dn.js"></script>


<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-K75Z5Q"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push(
{'gtm.start': new Date().getTime(),event:'gtm.js'}
);var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-K75Z5Q');</script>


<script type="text/javascript">
var _elqQ = _elqQ || [];
_elqQ.push(['elqSetSiteId', '413370795']);
_elqQ.push(['elqTrackPageView']);
(function () {
function async_load()
{ var s = document.createElement('script'); s.type = 'text/javascript'; s.async = true; s.src = '//img03.en25.com/i/elqCfg.min.js'; var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(s, x); }
if (window.addEventListener) window.addEventListener('DOMContentLoaded', async_load, false);
else if (window.attachEvent) window.attachEvent('onload', async_load);
})();
</script>

</body>
</html>

